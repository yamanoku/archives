---
title: クラウドワークスのWebアクセシビリティチェックを始めてみた
description: クラウドワークスのWebアクセシビリティチェックを始めてみた話です。
date: 2020-09-17
author: yamanoku
layout: '../layouts/ArchivesPost.astro'
---

![](https://i.gyazo.com/627253dc3266425cbf2798a446ef96b8.png)

こんにちは。フロントエンドエンジニアの [yamanoku](https://twitter.com/yamanoku) と申します。

最近久々に出社しましたが、どうやら半年以上も出社していなかったことに驚愕しました。自分自身が違和感なくリモート作業やれているのかもなぁという気づきにもなりました。

前回の記事では東京都 新型コロナウイルス対策サイトの Web アクセシビリティチェックをしたという話をしました。

[東京都新型コロナウイルス対策サイトにアクセシビリティ視点でコントリビュートしてみた](/covid-19-site-a11y-contribute)

今回の記事では、チーム内でクラウドワークスの Web アクセシビリティチェックを実施してみた話をします。

## Web アクセシビリティとは？

Accessibility は「アクセスできる・アクセスしやすさ」と翻訳されます。そして Web アクセシビリティは Web にある情報やコンテンツに、あらゆる人がアクセスできようにすることを指します。

あらゆる人がアクセスできるようにする、とはどういうことか。以下はその対応例です。

- デバイス操作に慣れない人でも簡単に閲覧できるようにする
- 難しい言い回しを避けて理解しやすくする
- コントラストを調整して閲覧しやすいデザインにする
- 音声読み上げをしてくれるスクリーンリーダーといった支援技術を使うために考慮する

W3C[^1]では、ウェブは多くの人々の日常に欠かせないものと定義して、アクセシビリティについては以下のように説明されています。

> 世界には 10 億人、言い換えると、人口の 15 から 20%の割合で障害を持つ人がいます。国連は障害者の権利条約を定めており、人権として Web を含んだ情報へのアクセスはほとんどの国で国連条約として批准されています。また数カ国では政策として義務付けられています。法律や規制にも関わらずアクセシビリティ標準を実行するのは、障害を持つ人たちにも、すべての人達にも不可欠なことです。
>
> [W3C のアクセシビリティと標準技術 | Web Accessibility Initiative (WAI) | W3C](https://www.w3.org/WAI/videos/standards-and-benefits/ja)

## Web アクセシビリティチェックをするきっかけ

そもそものチェックをするきっかけとなったのは、フロントエンドチームで行っていたフロントエンド基盤整理からでした。
以下フロントエンド基盤整理で行っていたものの一例です。

- 外部リンクに `rel=“noopener noreferrer”` をつけて脆弱性を改善する
- フロント実装面でのガイドラインの叩きをつくる
- SNS ログインボタンのロゴの刷新

改善していきたい内容をあげていき、タスク化して日々の業務のスキマで実施していきました。

そんな中アクセシビリティに興味がある私と同じチームの [earlgreyMK](https://twitter.com/earlgreyMK) は、デザイニング Web アクセシビリティ[^2]の社内輪読会を実施していたり、コーポレートサイトのリニューアルでアクセシビリティチェックを担当した経験[^3]もあり、クラウドワークスのアクセシビリティチェックもやってみようと思いました。

## チェックした方法など

### チェック項目について

どうやってチェックするか、については WCAG（ウェブコンテンツをよりアクセシブルにするためのガイドライン）をもとに項目を列挙しました。

ちなみに WCAG には「知覚可能」「操作可能」「理解可能」「堅牢」という４つの原則があり、その中で様々なユーザ層や状況からくるニーズを満たすために、3 つの適合レベル（A、AA、AAA）の達成基準あります。

今回チェックした達成基準は以下になります。

#### 知覚可能

- 1.1.1 非テキストコンテンツの達成基準
- 1.2.1 音声だけ及び映像だけ（収録済み）の達成基準
- 1.2.2 キャプション（収録済み）の達成基準
- 1.2.3 音声解説又はメディアに対する代替コンテンツ（収録済み）の達成基準
- 1.3.1 情報及び関係性の達成基準
- 1.3.2 意味のある順序の達成基準
- 1.3.3 感覚的な特徴の達成基準
- 1.4.1 色の使用の達成基準
- 1.4.2 音声の制御の達成基準
- 1.4.3 コントラスト（最低限レベル）の達成基準

#### 操作可能

- 2.1.1 キーボードの達成基準
- 2.1.2 キーボードトラップなしの達成基準
- 2.4.2 ページタイトルの達成基準
- 2.4.3 フォーカス順序の達成基準
- 2.4.4 リンクの目的（コンテキスト内）の達成基準
- 2.4.7 フォーカスの可視化の達成基準
- 2.5.2 ポインタのキャンセル
- 2.5.3 名前 (name) のラベル

#### 理解可能

- 3.1.1 ページの言語の達成基準
- 3.2.1 フォーカス時の達成基準
- 3.2.2 入力時の達成基準
- 3.3.1 エラーの特定の達成基準
- 3.3.2 ラベル又は説明の達成基準

#### 堅牢

- 4.1.1 構文解析の達成基準
- 4.1.2 名前（name），役割（role）及び値（value）の達成基準

レベル A 達成基準に加え、レベル AA のコントラストとフォーカスを項目に追加、更に WCAG2.1 より新たに追加された 2 つの項目（ポインタのキャンセル、名前 (name) のラベル）でチェックしました。

※ 基準適用されない項目（チェックする要素が存在しない場合）は省いております。

### チェックする範囲について

アクセシビリティチェックを行うにあたり、現在クラウドワークス内で存在するページを数えてみたところ、おおよそ 400 ページ近くあることが判明しました。

これを全てチェックするのは時間がかかるので、チェックを行うために主要なページをしぼりました。

![会員登録ページ](https://i.gyazo.com/1aed0bbe7f86f5de9ddfb3f02227c9cd.png)

![ログインページ](https://i.gyazo.com/74c92b16229bfd9e2fae278052a9d03b.png)

![TOPページ](https://i.gyazo.com/7c6bd7c09c74a7c15595c8ad485efc68.png)

これらを選んだ理由としては、ログインをしてない状態でも表示できるため不特定多数の人が閲覧すると想定したからです。

### チェックの進め方について

進め方として、1 週間で 1 ページの全項目をチェックしていく形で始めました。

![](https://i.gyazo.com/21e2aa8d7da480601936b2a4df51039c.png)

チェックはスプレッドシートに項目沿って確認をしていきます。

スプレッドシートは以前、自分が参加した外部のアクセシビリティ試験会[^4]のものから流用してきました。

![各達成基準で見つかった課題をスプレッドシートに「見つかった課題」「ページURL」「issue化」「メモ」といった項目で列挙している](https://i.gyazo.com/60b496638320ff002fa78b3f7b4c482b.png)

達成できているかどうかについて、Ameba アクセシビリティガイドライン[^5]も参考に使わせてもらいました。
ガイドラインには簡単な実例があり、どういった内容をチェックすればいいかが分かりやすく、チェックを進める上で理解の手がかりになりました。

その他、WCAG2.1 の解説書[^6]での達成失敗事例もどういった場合適応できていないかで参考にしました。

## チェック時に困ったことについて

チェックした経験がある人は共感してもらえそうですが、「項目を達成しているか」の判別が難しかったです。

達成基準の「1.2.1 音声だけ及び映像だけ（収録済み）の達成基準」では、動画に字幕が付けられているかという基準なのですが、TOP ページ下部にある動画では YouTube の「自動字幕機能」にて生成された字幕が使われています。
字幕がある時点で達成しているように思いましたが、機械翻訳では精度が怪しいため、○ でありつつ ✗ という判断になりました。

「2.5.2 ポインタのキャンセル」では、今ある UI においてどこまで達成できているのか、という判断が難しかったです（結果として問題無さそうと判断しました）。

合間でやっていた対応だったため、日によってチェックの精度にムラがありました。
１人はチェックできるけど他のタスクで手がつけられなかった、ということもありました。また、それぞれが確認した基準のダブルチェックも行うまでの時間はありませんでした。

## チェック時に工夫したことについて

コントラストチェックですが、[Axe](https://chrome.google.com/webstore/detail/axe-web-accessibility-tes/lhdoppojpmngadmnindnejefpokejbdd)というアクセシビリティチェックツールを使用することで簡単に問題点が発見できます。

![](https://i.gyazo.com/ff94f29456df98bde194d55a20d3ebcb.png)

要素数の列挙のほか、基準を満たしていないものを強調してくれます。

![達成基準を満たしていないオレンジ色のボタンが水色と黒の太い破線で強調されている](https://i.gyazo.com/e7e91fb2a37bca833e8505f364409b70.png)

Chrome の検証ツールでは要素を選択するとその要素のコントラスト比やキーボードでフォーカス可能なのかなど、アクセシビリティチェックしやすい機能が増えてきています。

![要素の上にポップアップでチェック項目が表示されている](https://i.gyazo.com/4e5025b28d6e374a0deb9ed838e95ab4.png)

達成基準 4.1.1 の構文解析の達成基準では[Nu Html Checker](https://validator.w3.org/nu/)を使ってチェックしました。

![](https://i.gyazo.com/d2048e58d53c37a24ec4bce074658335.png)

こちらは URL を打ち込むことで構文解析してくれるのですが、freee 株式会社の公開している freee アクセシビリティガイドライン[^7]より、[ブックマークレートを使うと良さそう](https://a11y-guidelines.freee.co.jp/explanations/check-tools.html?highlight=nu%20html#id79)ということで、そちらを使用しました。<br>
結果として URL を打ち込むことなく解析結果に遷移してくれます。

ただし、Nu Html Checker ではサーバーの方にデータが送られてしまうため社外に出したくないページは使わないようにしましょう。

## チェックした結果について

次に実際にチェックした結果、どういった項目が課題として浮かび上がったかの一例を紹介します。

### 達成基準 1.4.1「色の使用の達成基準」

利用規約・個人情報保護方針のリンクが色のみで判断できるものとなっており、こちらはディスプレイのグレイスケールモードを使っている方などには見づらいと判断しました。

![文章内にリンクのみ色が変わっている表示のスクリーンショット](https://i.gyazo.com/36f0e28e5d2796462e82f12e53caf077.png)

![文章内にリンクがあるが色の差別しかないためどこがリンクなのか分かりにくくなっている表示のスクリーンショット](https://i.gyazo.com/bd43d6454121c6983c72dd02a7ebe956.png)

この場合、リンク下線を出しておくことで通常のテキストと判別がしやすくなるように対応できそうです。

### 達成基準 1.3.3「感覚的な特徴の達成基準」

コンテンツを理解して操作できるように感覚的な特徴を使わないというものです。

会員登録ページにおける「ログインはこちら」という文言において、「こちら」がどこを指すかが曖昧になっており、テキストを読み上げた時に困惑してしまいかねないという問題が発覚しました。

![](https://i.gyazo.com/0e32d3d844e01586b1035598635ecf99.png)

「ログインする」「ログインページに移動」といったリンクの目的がはっきりとわかる文言に変える必要があります。

### 達成基準 2.4.7「フォーカスの可視化の達成基準」

クラウドワークスの中で使われているボタンは、フォーカスしたときのアウトラインが薄く見えづらいため、視認性がよくない問題を見つけました。

![ものすごく分かりづらいが薄い点線がアウトラインで表示されている](https://i.gyazo.com/100bea5a556f08817e0e855f2bea68f6.png)

クラウドワークスでは`cw-core`という独自の CSS フレームワークを長年使っており、こうしたボタンの仕様を一部変更することが、どのページでどれくらいの影響範囲になるかの検討がつけられていないため、安易に修正ができないという問題も表出しています。

### 達成基準 1.3.1「情報及び関係性の達成基準」

「メールアドレスではじめる」がマークアップとしては`<h2>`が正しいのではないかということが挙げられました。

![](https://i.gyazo.com/29509f8507b267a042b4858072e547f8.png)

現在は`<label>`タグで表現されていますが、これが支援技術によって読み上げられる時「メールアドレスではじめる」が`<label>`で呼ばれて、その直後の入力欄の`<input type="text">`でも読まれる状態になっていました。

「メールアドレスではじめる」は見出しとして、入力欄にはふさわしいラベルを当てる必要がありそうでした。

## チェックをしてみたまとめ

### ユーザーサポート側の負担を軽減できそう

アクセシビリティを向上するためのチェックだったのですが、入力フォームのラベルをチェックしているときに、ログインページでのメールアドレス入力箇所はユーザー名でもログインできるということが判明しました。

![ユーザーIDでもメールアドレスでもログインが出来るフォームのラベルが「メールアドレス」のみの表示になっていて、プレースホルダにも「メールアドレスを入力してください」となっている](https://i.gyazo.com/22e282dc2f52303967181285de606a4f.png)

ユーザーサポートではログイン時にメールアドレスを忘れた・使えなくなってしまった場合の変更対応があるため、万一ユーザー名がわかっていればログインができるので、結果としてユーザーサポートの負担も減りそうだと思いました。

### 歴史的な経緯がありそう

「2.4.3 フォーカス順序の達成基準」において、会員登録ページでは一番最初にメールアドレスの入力欄にフォーカスがあたるようになっていました。
これは`<input type="text">`に`tabindex="1"`が付与されていたためです。

何故こうなっていたかの要因は特定できておりませんが、先にキーボードでの操作を促す（メールアドレスを入力させたい）ためのものではないかと思いました。

### 次のステップはどうする？

今回チェックで発見できた問題点は、そのままにしておくのではなく、Qiita Team にログとして記載して GitHub Project に移行し看板管理をするようにしました。

![](https://i.gyazo.com/f0764d8bc2a29f883176910b1c95cd7b.png)

![](https://i.gyazo.com/1ad8841527a29b97463d1be95eebf948.png)

現在、チェックを行っていたときのチームは解散し新たなチームになったので、そこで引き続き改善活動に充てたいと思っております。

アクセシビリティチェック自体の反省点としては、やる・やらないを明確にして、他のページでも対応するときのフォーマットを整えて少ない時間の中でもより簡易的にチェックできたら良いかなと思いました。

今回はチェックしたのみで終わったのですが、引き続きあらゆる人に使ってもらえるサービスにしていくため、アクセシビリティ改善活動は続けていきます。

[^1]: Web 標準化を推進する為に設立された団体
[^2]: https://www.amazon.co.jp/dp/4862462650
[^3]: [「One CrowdWorks」で、コーポレートサイトをフルリニューアルした話。｜ Peter ｜ note](https://note.com/contrabass/n/nf7931eb0c905?magazine_key=m266243b86761#T0CYf)
[^4]: https://ca11y.connpass.com/event/169901/
[^5]: https://openameba.github.io/a11y-guidelines/
[^6]: https://waic.jp/docs/WCAG21/
[^7]: https://a11y-guidelines.freee.co.jp
